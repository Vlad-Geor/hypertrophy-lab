<div
  class="px-6 pt-6 pb-4 flex flex-col gap-4 bg-surface border border-gray-soft rounded-lg shadow-xl"
>
  <div class="flex items-start gap-4">
    <div class="flex flex-col gap-1">
      <div class="flex items-center gap-2">
        <lib-icon [icon]="'calendar-liner'" class="text-primary"></lib-icon>
        <h1 class="text-heading-semibold text-white">Schedule</h1>
      </div>
      <p class="text-sm text-nowrap text-gray-text">{{ today | date: 'fullDate' }}</p>
    </div>
  </div>
  <lib-button [size]="'lg'" [appearance]="'outline'" [fillContainer]="true">
    Today
  </lib-button>
  <lib-button
    theme="gradient-primary"
    [size]="'lg'"
    [fillContainer]="true"
    (click)="addRoutine()"
  >
    <lib-icon [icon]="'plus-solid'" left [iconSize]="16"></lib-icon>
    Add Routine
  </lib-button>
  <div class="grid grid-cols-2 gap-2">
    @for (pill of pillData; track $index) {
      <lib-pill
        [selected]="pill.daypart === selectedDaypartFilter()"
        [daypart]="pill.daypart"
        (pillSelected)="onDaypartFilter($event)"
      >
        <lib-icon
          [class]="pill.iconClass"
          [fillContainer]="false"
          [iconSize]="20"
          [icon]="pill.icon"
        ></lib-icon>
        <span>{{ pill.daypart | titlecase }}</span>
      </lib-pill>
    }
  </div>
</div>

<lib-surface-card
  cardTitle="Today's Routine"
  titleSize="lg"
  [cardTitleIcon]="'clock-solid'"
  cardTitleIconClass="text-primary"
>
  @if (hasAnyData()) {
    @if (filteredOverview()?.sections?.[0]?.items?.length) {
      @for (section of filteredOverview()?.sections ?? []; track $index) {
        @if (section?.items?.length) {
          <hl-day-part-overview [data]="section">
            <div dayPartOverviewHeader class="flex items-center gap-3">
              <div class="flex items-center gap-2">
                <lib-icon class="text-orange-400" [icon]="'sunrise-liner'"></lib-icon>
                <span>{{ section?.timeOfDay | titlecase }}</span>
              </div>
              <lib-tag [rounded]="true" theme="white" size="lg">
                {{ section?.items?.length }}
                {{ (section?.items?.length ?? 0 > 1) ? 'supplements' : 'supplement' }}
              </lib-tag>
            </div>
            @for (item of section?.items; track $index) {
              <hl-intake-action-card [cardData]="item"></hl-intake-action-card>
            }
          </hl-day-part-overview>
        }
      }
    } @else if (!filteredOverview()?.sections?.[0]?.items?.length) {
      <hl-no-data [type]="'filter'"></hl-no-data>
    }
  } @else if (dayOverview.isLoading()) {
    <lib-bouncing-loader></lib-bouncing-loader>
  } @else if (!dayOverview.isLoading()) {
    <hl-no-data
      [type]="'no-data'"
      noDataMessage="There are no supplements for today. Take a breather for the day, or add a supplement to start tracking!"
    ></hl-no-data>
  }
  @if (selectedDaypartFilter()) {
    <lib-tag surfaceCardTag>{{ selectedDaypartFilter() | titlecase }}</lib-tag>
  }
</lib-surface-card>

<lib-surface-card
  cardTitle="Weekly Overview"
  cardTitleIcon="calendar-liner"
  cardTitleIconClass="text-primary"
>
  <p class="text-xl text-gray-text">Coming soon!...</p>
  <lib-date-range-picker></lib-date-range-picker>
</lib-surface-card>
