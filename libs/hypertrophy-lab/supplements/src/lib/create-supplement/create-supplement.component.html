<div class="flex items-center justify-between">
  <p
    tabindex="0"
    class="text-xl font-semibold text-white"
    (click)="onClose()"
    (keypress.enter)="onClose()"
  >
    Create Supplement
  </p>
  <lib-icon-button
    class="text-text-3"
    [icon]="'xmark-solid'"
    (click)="onClose()"
  ></lib-icon-button>
</div>

<div class="my-6">
  <lib-checkbox label="Mon"></lib-checkbox>
</div>

<form [formGroup]="form" (ngSubmit)="onSubmit()" class="flex flex-col gap-3">
  <div class="flex items-center gap-3">
    <lib-input
      type="number"
      label="Cost($)"
      formControlName="name"
      placeholder="Supp name"
    ></lib-input>
    <lib-date-picker formControlName="date" label="Expiry Date"></lib-date-picker>
  </div>

  <lib-input formControlName="description" placeholder="Description"></lib-input>

  <lib-single-select
    [options]="[
      { displayText: 'A', value: '' },
      { displayText: 'B', icon: 'check-solid', value: '' },
      { displayText: 'C', value: '' },
    ]"
    placeholder="All Categories"
    formControlName="healthTargets"
  ></lib-single-select>

  <lib-slide-toggle formControlName="reminders"></lib-slide-toggle>

  <div class="px-2">
    <p class="mb-3">Image</p>
    @if (previewUrl()) {
      <img
        class="h-40 w-full object-contain object-top rounded-lg"
        [src]="previewUrl()"
        alt="Supplement Image"
      />
    } @else {
      <div class="h-40 w-full rounded-lg bg-gray-background p-4 flex">
        <div
          class="flex-1 rounded-md flex items-center justify-center hover:bg-gray-200 hover:cursor-pointer transition-all duration-150"
        >
          <input
            type="file"
            accept="image/*"
            (change)="onFileInput($event)"
            #fileInput
            hidden
          />
          <button
            type="button"
            class="btn flex items-center gap-4"
            (click)="fileInput.click()"
          >
            Upload image
            <lib-icon [iconSize]="48" [icon]="'apple-whole-solid'"></lib-icon>
          </button>
        </div>
      </div>
    }
  </div>
</form>

<div class="flex justify-center gap-3">
  <lib-button appearance="outline" (click)="onClose()">Discard</lib-button>
  <lib-button (click)="onSubmit()">Save</lib-button>
</div>
