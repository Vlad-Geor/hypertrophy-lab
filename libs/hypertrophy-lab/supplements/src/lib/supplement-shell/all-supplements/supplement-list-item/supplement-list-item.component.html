@let data = _supplement();

<div>
  <img
    libImagePlaceholder
    [placeholderTarget]="'supplement'"
    class="rounded-full min-h-16 max-h-16 min-w-16 object-cover border border-gradient-primary"
    [src]="data?.images?.[0]"
    alt="Supplement image"
  />
</div>
<div class="flex items-stretch gap-3 flex-1">
  <div class="flex flex-col flex-1">
    <header class="flex items-start gap-2">
      <span class="text-lg text-white font-medium w-max">
        {{ data?.name ?? 'C-1000' }}
      </span>
      @if (data?.targets) {
        <span class="flex items-center gap-1 pt-1.5">
          <!-- <lib-tag-group> -->
          <!-- @for (item of data?.healthTargets ?? ['heart', 'skeleton']; track $index) { -->
          <lib-tag size="xs" [theme]="'primary'" [rounded]="true">
            {{ (data?.targets ?? [])[0].name | firstWord | titlecase }}
          </lib-tag>
          <!-- } -->
          <!-- </lib-tag-group> -->
        </span>
      }
    </header>
    <p class="text-xxs text-gray-text mb-1.5">
      {{ data?.brandName }}, {{ data?.unitsPerContainer }} {{ data?.form }}
    </p>
    <p class="text-xs line-clamp-3 text-text-3">
      {{
        data?.description ??
          `C-1000 is a slow release vitamin C supplement, used for maintaining elevated blood
      vitamin C levels. Here is some additional text to make it to three rows. And here's
      the fourth.`
      }}
    </p>
  </div>
  @if (data?.hasInventory) {
    <lib-divider></lib-divider>
    <div class="flex flex-col gap-3 w-min">
      <lib-doughnut [sizePx]="48" [stroke]="16" [progress]="stockLeftPercentage()">
        <p class="text-xxs text-white text-center">{{ data?.onHand }} units</p>
      </lib-doughnut>
      <p class="text-xs text-text-2 text-center">
        {{ (data?.onHand ?? 0) / (data?.servingUnits ?? 0) }} days left
      </p>
    </div>
  }
</div>
<div
  class="absolute p-1 text-xs top-0 left-0 -translate-x-1/4 -translate-y-1/4 bg-secondary-soft border border-secondary-soft text-secondary rounded-full"
>
  $15
</div>
